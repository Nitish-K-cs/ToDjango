{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ToDjango</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" href="{% static 'css/todo.css' %}">
</head>

<body>

  <!-- Navbar -->
  <nav class="navbar">
    <div class="navbar-inner">
      <!-- Left: Brand -->
      <div class="navbar-brand">
        ToDjango
      </div>

      <!-- Right: User -->
      <div class="navbar-user">
        {% if request.user.is_authenticated %}
          <span class="navbar-username">ðŸ‘‹ {{ request.user.username }}</span>

          <form method="post" action="{% url 'logout' %}">
            {% csrf_token %}
            <button type="submit" class="navbar-logout">Logout</button>
          </form>
        {% else %}
          <a href="{% url 'login' %}" class="navbar-login">Login</a>
        {% endif %}
      </div>
    </div>
  </nav>

  <!-- Main content -->
  <div class="container">
    <div class="app-header">
      <h1>To do</h1>
      <div class="app-sub">Quickly capture and organize tasks</div>
    </div>

    <form method="POST" action="/" class="form-row">
      {% csrf_token %}
      {{ form.title }}
      <input type="submit" class="btn btn-primary" value="Create task">
    </form>

    <div class="task-list">
      {% for task in tasks %}
        <div class="task {% if task.complete %}task-complete{% endif %}">
          <div class="task-left">
            <div class="checkbox"></div>
            <div class="task-title">
              {% if task.complete %}
                <strike>{{ task }}</strike>
              {% else %}
                {{ task }}
              {% endif %}
            </div>
          </div>

          <div class="task-actions">
            <a class="link link-update" href="{% url 'update_task' task.id %}">Update</a>
            <a class="link link-delete" href="{% url 'delete' task.id %}">Delete</a>
          </div>
        </div>
      {% empty %}
        <p class="muted center">No tasks yet â€” create your first one above.</p>
      {% endfor %}
    </div>
  </div>

</body>
</html>
